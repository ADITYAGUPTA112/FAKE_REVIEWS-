<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - TrustLens AI</title>

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        background: '#0f172a',
                        surface: 'rgba(255, 255, 255, 0.03)',
                        surfaceHover: 'rgba(255, 255, 255, 0.06)',
                        border: 'rgba(255, 255, 255, 0.08)',
                        brand: {
                            cyan: '#06b6d4',
                            purple: '#a855f7',
                            fake: '#ef4444', // Red 500
                            genuine: '#10b981' // Emerald 500
                        }
                    }
                }
            }
        }
    </script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            background-color: #0f172a;
            color: #f8fafc;
        }

        /* Glassmorphism utility */
        .glass-panel {
            background: rgba(30, 41, 59, 0.5);
            /* Slate 800 with opacity */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* Gradient Button */
        .btn-gradient {
            background: linear-gradient(135deg, #a855f7 0%, #06b6d4 100%);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: none;
            color: white;
        }

        .btn-gradient::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #06b6d4 0%, #a855f7 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 0;
        }

        .btn-gradient:hover::before {
            opacity: 1;
        }

        .btn-gradient span,
        .btn-gradient i {
            position: relative;
            z-index: 1;
        }

        /* Input styling */
        .input-dark {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #f8fafc;
            transition: all 0.2s ease;
        }

        .input-dark:focus {
            background: rgba(15, 23, 42, 0.8);
            border-color: #06b6d4;
            box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.2);
            outline: none;
        }

        /* Sidebar Link animation */
        .sidebar-link {
            transition: all 0.2s ease;
        }

        .sidebar-link:hover {
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
        }

        .sidebar-link.active {
            background: rgba(6, 182, 212, 0.1);
            color: #06b6d4;
            border-right: 3px solid #06b6d4;
        }

        /* Loading Skeleton */
        .skeleton {
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.03) 25%, rgba(255, 255, 255, 0.08) 50%, rgba(255, 255, 255, 0.03) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% {
                background-position: 200% 0;
            }

            100% {
                background-position: -200% 0;
            }
        }

        /* Review Card Colored Borders */
        .border-left-genuine {
            border-left: 4px solid #10b981;
        }

        .border-left-fake {
            border-left: 4px solid #ef4444;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0f172a;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }
    </style>
</head>

<body class="flex h-screen overflow-hidden antialiased">

    <!-- LEFT SIDEBAR -->
    <aside
        class="w-64 flex-shrink-0 border-r border-slate-800 bg-slate-900/50 backdrop-blur-xl flex flex-col justify-between transition-all duration-300 z-20">
        <div>
            <!-- Logo Section -->
            <div class="h-16 flex items-center px-6 border-b border-slate-800">
                <div
                    class="w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center mr-3 shadow-lg shadow-purple-500/20">
                    <i class="ph-fill ph-shield-check text-white text-lg"></i>
                </div>
                <span
                    class="text-lg font-bold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400">TrustLens
                    AI</span>
            </div>

            <!-- Navigation Links -->
            <nav class="p-4 space-y-1 mt-2">
                <p class="px-3 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2">Main Menu</p>
                <a href="#"
                    class="sidebar-link active flex items-center px-3 py-2.5 rounded-lg text-sm font-medium text-slate-300">
                    <i class="ph ph-squares-four text-lg mr-3"></i> Dashboard
                </a>
                <a href="#"
                    class="sidebar-link flex items-center px-3 py-2.5 rounded-lg text-sm font-medium text-slate-400">
                    <i class="ph ph-magnifying-glass text-lg mr-3"></i> Analyze Product
                </a>
                <a href="#"
                    class="sidebar-link flex items-center px-3 py-2.5 rounded-lg text-sm font-medium text-slate-400">
                    <i class="ph ph-cpu text-lg mr-3"></i> Model Settings
                </a>
                <a href="#"
                    class="sidebar-link flex items-center px-3 py-2.5 rounded-lg text-sm font-medium text-slate-400">
                    <i class="ph ph-download-simple text-lg mr-3"></i> Export CSV
                </a>
            </nav>
        </div>

        <!-- User Profile & Logout -->
        <div class="p-4 border-t border-slate-800 space-y-2">
            <div class="flex items-center px-3 py-2">
                <img src="https://i.pravatar.cc/150?img=68" alt="User Avatar"
                    class="w-9 h-9 rounded-full mr-3 border border-slate-700">
                <div class="flex flex-col">
                    <span class="text-sm font-medium text-white shadow-sm">{{ session.get('user', 'Demo User') }}</span>
                    <span class="text-xs text-cyan-400">Pro Plan</span>
                </div>
            </div>
            <a href="{{ url_for('logout') }}"
                class="sidebar-link flex items-center px-3 py-2 rounded-lg text-sm font-medium text-red-400 hover:text-red-300 hover:bg-red-500/10 transition-colors">
                <i class="ph ph-sign-out text-lg mr-3"></i> Logout
            </a>
        </div>
    </aside>

    <!-- MAIN CONTENT AREA -->
    <div class="flex-1 flex flex-col h-screen overflow-hidden relative">
        <!-- Ambient lighting in main area -->
        <div
            class="absolute top-0 right-0 w-96 h-96 bg-purple-500/10 rounded-full mix-blend-screen filter blur-3xl pointer-events-none">
        </div>

        <!-- TOP NAVBAR -->
        <header class="h-16 flex items-center justify-between px-8 border-b border-slate-800 glass-panel z-10">
            <div class="flex items-center space-x-4">
                <h2 class="text-xl font-semibold text-white">Dashboard Overview</h2>
                <div
                    class="hidden md:flex items-center px-2.5 py-1 rounded-full border border-cyan-500/30 bg-cyan-500/10 text-cyan-400 text-xs font-medium">
                    <span class="w-1.5 h-1.5 rounded-full bg-cyan-400 mr-2 animate-pulse"></span>
                    DistilBERT Active
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <button class="p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition">
                    <i class="ph ph-moon text-xl"></i>
                </button>
                <button class="p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition relative">
                    <i class="ph ph-bell text-xl"></i>
                    <span class="absolute top-1.5 right-1.5 w-2 h-2 rounded-full bg-purple-500"></span>
                </button>
            </div>
        </header>

        <!-- SCROLLABLE CONTENT -->
        <main class="flex-1 overflow-y-auto p-8 z-10 scroll-smooth">
            <div class="max-w-7xl mx-auto space-y-8">

                <!-- HERO SECTION: URL INPUT -->
                <section class="glass-panel p-8 rounded-2xl relative overflow-hidden group">
                    <!-- Subtle gradient overlay -->
                    <div
                        class="absolute inset-0 bg-gradient-to-r from-purple-500/5 to-cyan-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                    </div>

                    <div class="relative z-10 max-w-3xl">
                        <h1 class="text-3xl font-bold text-white mb-2">AI-Powered Fake Review Detection</h1>
                        <p class="text-slate-400 mb-6 text-sm">Analyze Amazon products using transformer-based NLP
                            models. Paste a URL or ASIN below.</p>

                        <div class="flex flex-col sm:flex-row gap-4">
                            <div class="relative flex-grow">
                                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                    <i class="ph ph-link text-slate-400 text-lg"></i>
                                </div>
                                <input type="text" id="asinInput"
                                    class="input-dark block w-full pl-11 pr-4 py-3.5 rounded-xl sm:text-sm shadow-inner"
                                    placeholder="E.g., https://www.amazon.com/dp/B07VGRJDFY or ASIN">
                            </div>

                            <button id="analyzeBtn"
                                class="btn-gradient py-3.5 px-8 rounded-xl font-semibold flex items-center justify-center shadow-lg shadow-cyan-500/20 whitespace-nowrap">
                                <i class="ph ph-magic-wand mr-2 text-lg"></i>
                                <span id="analyzeBtnText">Analyze Now</span>
                            </button>
                        </div>
                    </div>
                </section>

                <!-- 4 GRID METRIC CARDS -->
                <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Card 1 -->
                    <div class="glass-panel p-6 rounded-2xl hover:-translate-y-1 transition-transform duration-300">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-slate-400 text-sm font-medium">Total Reviews</h3>
                            <div
                                class="w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center text-blue-400">
                                <i class="ph ph-chat-text text-xl"></i>
                            </div>
                        </div>
                        <div class="flex items-baseline mb-2">
                            <span class="text-4xl font-bold text-white tracking-tight" id="statTotal">--</span>
                        </div>
                        <p class="text-xs text-slate-500">Fetched for analysis</p>
                    </div>

                    <!-- Card 2 -->
                    <div class="glass-panel p-6 rounded-2xl hover:-translate-y-1 transition-transform duration-300">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-slate-400 text-sm font-medium">Fake Risk Count</h3>
                            <div class="w-8 h-8 rounded-lg bg-red-500/10 flex items-center justify-center text-red-500">
                                <i class="ph ph-shield-warning text-xl"></i>
                            </div>
                        </div>
                        <div class="flex items-baseline mb-2">
                            <span class="text-4xl font-bold text-red-400 tracking-tight" id="statFakeCount">--</span>
                        </div>
                        <p class="text-xs text-slate-500">Predicted artificial reviews</p>
                    </div>

                    <!-- Card 3 -->
                    <div
                        class="glass-panel p-6 rounded-2xl hover:-translate-y-1 transition-transform duration-300 relative overflow-hidden">
                        <div class="flex justify-between items-start mb-4 relative z-10">
                            <h3 class="text-slate-400 text-sm font-medium">Genuine Ratio</h3>
                            <div
                                class="w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center text-emerald-400">
                                <i class="ph ph-check-circle text-xl"></i>
                            </div>
                        </div>
                        <div class="flex items-baseline mb-2 relative z-10">
                            <span class="text-4xl font-bold text-emerald-400 tracking-tight"
                                id="statTrustScore">--%</span>
                        </div>
                        <div class="w-full bg-slate-800 rounded-full h-1.5 mt-3 relative z-10">
                            <div class="bg-emerald-400 h-1.5 rounded-full" style="width: 0%" id="trustScoreBar"></div>
                        </div>
                    </div>

                    <!-- Card 4 -->
                    <div class="glass-panel p-6 rounded-2xl hover:-translate-y-1 transition-transform duration-300">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-slate-400 text-sm font-medium">Avg Confidence</h3>
                            <div
                                class="w-8 h-8 rounded-lg bg-purple-500/10 flex items-center justify-center text-purple-400">
                                <i class="ph ph-target text-xl"></i>
                            </div>
                        </div>
                        <div class="flex items-baseline mb-2">
                            <span class="text-4xl font-bold text-purple-400 tracking-tight" id="statAccuracy">--%</span>
                        </div>
                        <p class="text-xs text-slate-500">Model certainty level</p>
                    </div>
                </section>

                <!-- MAIN VIZ SECTION -->
                <section class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Gauge / Risk Visualization -->
                    <div
                        class="lg:col-span-1 glass-panel p-6 rounded-2xl flex flex-col items-center justify-center text-center">
                        <h3 class="text-slate-300 text-sm font-medium mb-6 w-full text-left">Overall Authenticity Score
                        </h3>

                        <div class="relative w-48 h-48 flex items-center justify-center mb-4">
                            <!-- Circular Gauge Placeholder (Will use Chart.js Doughnut or SVG) -->
                            <svg viewBox="0 0 36 36" class="w-full h-full transform -rotate-90">
                                <path class="text-slate-800" stroke-width="3" stroke="currentColor" fill="none"
                                    d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                                <path id="gaugePath" class="text-emerald-500 transition-all duration-1000 ease-out"
                                    stroke-dasharray="0, 100" stroke-width="3" stroke="currentColor" fill="none"
                                    stroke-linecap="round"
                                    d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                            </svg>
                            <div class="absolute flex flex-col items-center justify-center">
                                <span class="text-4xl font-bold text-white tracking-tighter" id="gaugeScore">--</span>
                                <span class="text-xs text-slate-400 mt-1">/ 100</span>
                            </div>
                        </div>

                        <div class="bg-slate-800/50 px-4 py-2 rounded-lg border border-slate-700 w-full">
                            <p class="text-sm text-slate-300 flex items-center justify-center">
                                Status: <span id="riskLabel"
                                    class="ml-2 font-semibold text-slate-500">Awaiting...</span>
                            </p>
                        </div>
                    </div>

                    <!-- Distribution Bar Chart -->
                    <div class="lg:col-span-2 glass-panel p-6 rounded-2xl flex flex-col">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-slate-300 text-sm font-medium">Confidence Distribution</h3>
                            <button class="text-slate-500 hover:text-white transition"><i
                                    class="ph ph-dots-three text-xl"></i></button>
                        </div>
                        <div class="flex-grow w-full relative h-[250px]">
                            <canvas id="distributionChart"></canvas>
                        </div>
                    </div>
                </section>

                <!-- REVIEW INTELLIGENCE FEED -->
                <section class="glass-panel p-6 rounded-2xl">
                    <div class="flex justify-between items-center border-b border-slate-800 pb-4 mb-6">
                        <div>
                            <h3 class="text-lg font-semibold text-white">Review Intelligence Feed</h3>
                            <p class="text-sm text-slate-400">Detailed breakdown of individual AI predictions</p>
                        </div>
                        <button
                            class="flex items-center space-x-2 text-sm text-slate-300 hover:text-white bg-slate-800 hover:bg-slate-700 px-4 py-2 rounded-lg border border-slate-700 transition">
                            <i class="ph ph-download-simple"></i>
                            <span>Download CSV</span>
                        </button>
                    </div>

                    <div class="space-y-4" id="reviewFeed">
                        <!-- Empty State / Placeholder -->
                        <div
                            class="text-center py-12 px-4 rounded-xl border border-dashed border-slate-700 bg-slate-800/20">
                            <div
                                class="w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-500">
                                <i class="ph ph-magnifying-glass text-2xl"></i>
                            </div>
                            <h4 class="text-slate-300 font-medium mb-1">No Data Yet</h4>
                            <p class="text-slate-500 text-sm">Enter a product URL above to generate the intelligence
                                feed.</p>
                        </div>
                    </div>
                </section>

                <!-- Spacer for bottom scroll -->
                <div class="h-10"></div>
            </div>
        </main>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>